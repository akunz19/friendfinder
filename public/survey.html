<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>    
    <title>Friend Quiz</title>
</head>
<body>
    <h1>The Matchelor!</h1>
    <form id="myform">
    <div class="form-group">
      <label for="validationDefault01">First name</label>
      <input type="text" class="form-control name" id="validationDefault01" placeholder="First name" required>
    </div>
    <div class="form-group">
      <label for="validationDefault02">Last name</label>
      <input type="text" class="form-control imgurl" id="validationDefault02" placeholder="Last name" required>
    </div>
    <!-- <div class="form-group">
      <label for="validationDefaultUsername">Username</label>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text" id="inputGroupPrepend2">@</span>
        </div>
        <input type="text" class="form-control" id="validationDefaultUsername" placeholder="Username" aria-describedby="inputGroupPrepend2" required>
      </div>
    </div>
  <div class="form-group">
    <div class="form-check">
      <input class="form-check-input" type="checkbox" value="" id="invalidCheck2" required>
      <label class="form-check-label" for="invalidCheck2">
        Agree to terms and conditions
      </label>
    </div>
  </div> -->
    <div class='form-group container question-class question-div-1' id='1'>
            <h3>How much clarity do you feel you've reached over the past year?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="1">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>
    </div>
    <div class='form-group container question-class question-div-2' id='2'>
            <h3>How ready are you to find love?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="2">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>
    </div>
    <div class='form-group container question-class question-div-3' id='3'>
            <h3>Would you say you are an open person?</h3>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="3">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

    </div>
    <div class='form-group container question-class question-div-4' id='4'>
            <h3>Are you here for the right reasons?</h3>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="4">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

    </div>
    <div class='form-group container question-class question-div-5' id='5'>
         <h3>How good do you look in sequins?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="5">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                     </select>
                  </div>

    </div>
    <div class='form-group container question-class question-div-6' id='6'>
            <h3>Would you accept this rose?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="6">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

    </div>
    <div class='form-group container question-class question-div-7' id='7'>
            <h3>Do you feel like this is your last chance to find love?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="7">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

    </div>
    <div class='form-group container question-class question-div-8' id='8'>
            <h3>Would you say you are following your own journey?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="8">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      </select>
                  </div>

    </div>
    <div class='form-group container question-class question-div-9' id='9'>
            <h3>Would you say you've had a hard past?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="9">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>                               
                     </select>
                  </div>

    </div>
    <div class='form-group container question-class question-div-10' id='10'>
            <h3>How likely are you to choose Chris Harrison instead of The Batchelor?</h3>
            <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <label class="input-group-text" for="inputGroupSelect01">Options</label>
                    </div>
                    <select class="custom-select" id="10">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                    </select>
                  </div>

    </div>
<button type="submit" id = "submit" class="btn btn-success">Submit</button>
<!-- Button trigger modal -->

<!-- Modal -->
  <!-- <button class="btn btn-primary" type="submit">Submit form</button> -->
</form>
<!-- <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
  <div class="modal-header">
  <h5 class="modal-title" id="exampleModalLongTitle">Your Match:</h5>
  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
  <span aria-hidden="true">&times;</span>
  </button>
  </div>
  <div class="modal-body" id="displayChosenBachelor"></div>
  <div class="modal-footer">
  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
  </div>
  </div>
  </div>
  </div> -->
  
    <!-- <h2>Do you have what it takes to be matched with The Bachelor? Take this quiz to find out!</h2>
    <form>
      <div class="form-group">
        <label for="validationDefault01">Name</label>
        <input type="text" class="form-control name" id="validationDefault01" placeholder="Name" required>
        </div>
      <div class="form-group">
        <label for="imgurl">Profile Picture:</label>
        <label for="validationDefault02">Name</label>
        <input type="text" class="form-control imgurl" id="validationDefault02" placeholder="Image URL" required>
      </div>
      <div class = "container" id= "question-container">
                <div class='form-group container question-class question-div-1' id='1'>
                        <h3>How much clarity do you feel you've reached over the past year?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="1">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                </select>
                              </div>
                </div>
                <div class='form-group container question-class question-div-2' id='2'>
                        <h3>How ready are you to find love?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="2">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                </select>
                              </div>
                </div>
                <div class='form-group container question-class question-div-3' id='3'>
                        <h3>Would you say you are an open person?</h3>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="3">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                </select>
                              </div>

                </div>
                <div class='form-group container question-class question-div-4' id='4'>
                        <h3>Are you here for the right reasons?</h3>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="4">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                </select>
                              </div>

                </div>
                <div class='form-group container question-class question-div-5' id='5'>
                     <h3>How good do you look in sequins?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="5">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                 </select>
                              </div>

                </div>
                <div class='form-group container question-class question-div-6' id='6'>
                        <h3>Would you accept this rose?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="6">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                </select>
                              </div>

                </div>
                <div class='form-group container question-class question-div-7' id='7'>
                        <h3>Do you feel like this is your last chance to find love?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="7">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                </select>
                              </div>

                </div>
                <div class='form-group container question-class question-div-8' id='8'>
                        <h3>Would you say you are following your own journey?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="8">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                  </select>
                              </div>

                </div>
                <div class='form-group container question-class question-div-9' id='9'>
                        <h3>Would you say you've had a hard past?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="9">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>                               
                                 </select>
                              </div>

                </div>
                <div class='form-group container question-class question-div-10' id='10'>
                        <h3>How likely are you to choose Chris Harrison instead of The Batchelor?</h3>
                        <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                  <label class="input-group-text" for="inputGroupSelect01">Options</label>
                                </div>
                                <select class="custom-select" id="10">
                                  <option value="1">1</option>
                                  <option value="2">2</option>
                                  <option value="3">3</option>
                                  <option value="4">4</option>
                                  <option value="5">5</option>
                                </select>
                              </div>

                </div>
        </div>
        <button type="submit" id="submit" class="btn btn-success" data-toggle="modal" data-target="#exampleModalCenter">Submit</button>
        <!-- Button trigger modal -->

<!-- Modal -->
<!-- <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Your Match:</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="displayChosenBachelor"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
      </form> -->
</body>
</html>
<script text = "Javascript">
  var score;
  var match;
  var name = $(".name")[0];
  var imgurl = $(".imgurl")[0];

  
  $("#submit").click(function(){
      event.preventDefault();
      if(!name.checkValidity() || !imgurl.checkValidity()){
        throw name.validationMessage;
        throw imgurl.validationMessage;
      };
    console.log("here");
      if(form.checkValidity()){
        console.log("now im here")
      var newBachelor = { //user object
          name: $(".name").val().trim(),
          image: $(".imgurl").val().trim(),
          scores: [],
          match: match

      };

      function getScores(){ //gets the scores from questions
          $.each($(".custom-select option:selected"), function(){            
          newBachelor.scores.push(parseInt($(this).val()));
      });
      }
      getScores();

      $.post("/api/bachelors", newBachelor,
    function(data) {

      if (data) {
        console.log("success");
      }

      else {
        alert("Please answer all of the questions");
      };

      $(".name").val("");
      $(".imgurl").val("");
      // $(".custom-select").val("");
    });
    runBachelorQuery();

    function runBachelorQuery() {
$.ajax({ url: "/api/bachelors", data: newBachelor, method: "GET" })
.then(function(Bachelors) {
  var index = Bachelors.length - 1;
  console.log("inside waitlistquery", Bachelors[index].match);
  var myMatch = Bachelors[index].match;
  console.log("------------------------------------");

  var bachelorModal = $("#displayChosenBachelor");
  bachelorModal.append("<h2>"+myMatch.name+"</h2>")
  bachelorModal.append("<img src='"+myMatch.image+"' class='img-fluid rounded float-left' alt='chris harrison'>")
  
  });
};


      console.log("myscores", newBachelor.scores);
      } //end of if
  });



 


</script>